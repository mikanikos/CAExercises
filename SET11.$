.SECT TEXT
start:
PUSH n
CALL sum
MOV SP,BP
PUSH AX
PUSH fmt
PUSH 127
SYS
MOV SP,BP
PUSH n
CALL equ
MOV SP,BP
PUSH 0
PUSH 1
SYS
sum:
PUSH BP
MOV BP,SP
MOV BX,4(BP)
MOV SI,0
MOV CX,m-n
SHR CX,1
MOV AX,0
1:
ADD AX,(BX)(SI)
ADD SI,2
LOOP 1b
2:
MOV SP,BP
POP BP
RET
equ:
PUSH BP
MOV BP,SP
MOV SI,4(BP)
MOV DI,m
MOV CX,m-n
SHR CX,1
MOV BX,end-m
SHR BX,1
CMP CX,BX
JNE 1f
REPE CMPSW
JNE 1f
MOV AX,1
JMP 2f
1:
MOV AX,0
2:
MOV SP,BP
POP BP
RET
.SECT DATA
n: .WORD 1,2,3,4
m: .WORD 1,2,3,4
end: .SPACE 1
fmt: .ASCII "%d"
