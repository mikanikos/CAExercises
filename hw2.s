.SECT .TEXT
start:
PUSH str1
CALL dim
MOV SP,BP
PUSH str2
PUSH str1
CALL equ
MOV SP,BP
PUSH str3
PUSH str1
CALL con
MOV SP,BP
PUSH 0
PUSH 1
SYS
dim:
PUSH BP
MOV BP,SP
MOV DI,4(BP)
MOV AX,(c)
MOV CX,-1
REPNE SCASB
NEG CX
SUB CX,1
MOV SP,BP
POP BP
RET
equ:
PUSH BP
MOV BP,SP
MOV DI,4(BP)
MOV SI,6(BP)
PUSH DI
CALL dim
MOV SP,BP
MOV DI,4(BP)
MOV SI,6(BP)
MOV DX,CX
PUSH SI
CALL dim
MOV SP,BP
MOV DI,4(BP)
MOV SI,6(BP)
CMP DX,CX
JNE 1f
REPE CMPSB
JNE 1f
MOV AX,1
JMP 2f
1:
MOV AX,0
2:
MOV SP,BP
POP BP
RET
con:
PUSH BP
MOV BP,SP
MOV SI,4(BP)
MOV DI,6(BP)
PUSH DI
CALL dim
MOV SP,BP
MOV DX,CX
MOV SI,4(BP)
MOV DI,6(BP)
PUSH SI
CALL dim
MOV SP,BP
MOV SI,4(BP)
MOV DI,6(BP)
CMP DX,CX
JG 1f
SUB CX,DX
ADD SI,CX
PUSH DI
PUSH SI
CALL equ
MOV SP,BP
JMP 2f
1:
MOV AX,0
2:
MOV SP,BP
POP BP
RET
.SECT .DATA
str1: .ASCII "ciao."
str2: .ASCII "ciao."
str3: .ASCII "ao."
c: .ASCII "."
